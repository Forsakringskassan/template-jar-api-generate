buildscript {
  repositories {
	gradlePluginPortal()
	mavenCentral()
	maven {
	  url = uri("https://maven.pkg.github.com/Forsakringskassan/gradle-conventions")
	  credentials {
	    username = System.getenv("GITHUB_ACTOR")
	    password = System.getenv("GITHUB_TOKEN")
	  }
	}
  }

  dependencies {
    classpath "se.fk.gradle:gradle-conventions:1.1.0"
  }
}

apply plugin: "se.fk.gradle.bundle-jar"
apply plugin: "se.fk.gradle.openapi-generate"

fkOpenApiGenerate {
	generatorName.set("jaxrs-spec")
	openapiDependencies.set([
		"se.fk.gradle.examples:template-api:1.1.0"
	])
	inputSpecFormat.set(InputSpecFormat.YAML)
}

javaExtension {
	javaVersion = 17
}

staticCodeAnalysisExtension {
	maxViolations.set(1)
}

dependencies {
	implementation 'org.springframework:spring-web:6.1.4'
	implementation 'org.springframework:spring-context:6.1.4'
	implementation 'org.springframework.boot:spring-boot-starter-validation:3.2.2'

	compileOnly "org.immutables:value:2.10.1"
	annotationProcessor 'org.immutables:value:2.10.1'
}
